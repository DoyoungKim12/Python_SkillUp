# 6. 정규표현식 파트 1
- 정규표현식은 지정 가능한 패턴으로, 특수 문자를 사용하여 특정 문자/숫자/단어 의 조합을 표현한다.
- 정규표현식 문법은 다양하고, 파이썬 정규표현식 패키지는 유연한 고급 버전의 펄(Perl) 표준을 따른다.
<br>

## 6.1 정규표현식의 소개
- 간단한 정규표현식의 예시
  - cat : cat과 정확히 일치
  - ca+t : cat, caat, caaat 등 최소 한개 이상의 a가 있는 문자열과 일치
  - ca\\+t : ca+t와 정확히 일치 (이스케이프 시퀀스는 특수문자를 리터럴 문자로 되돌려놓음)
  - ca\*t : ca+t와 유사하나 ct도 포함 (최소 0개 이상의 a가 있는 문자열과 일치)
<br>

## 6.2 실제 예시 : 전화번호
- 전화번호를 검증하는 정규표현식 패턴을 구현한 프로그램 예시
```python
# 정규표현식 패키지 import
import re
# 패턴 앞의 r은 raw string(원시 문자열)을 뜻하는 것으로, r을 쓰지 않아도 동작하긴 하지만 코드의 신뢰성을 위해 쓰는 것이 좋다.
pattern = r'\d\d\d-\d\d\d\d-\d\d\d\d'

s = input('Enter tel. number : ')
if re.match(pattern, s):
  print('Accepted')
else :
  print('Incorrect format')
```
<br>

## 6.3 일치 패턴 정제하기
- re.match 함수는 대상 문자열의 **앞부분**이 패턴과 일치하면 True (문자열 전체가 일치할 필요가 없음)
- 정확히 일치하도록 하려면 문자열의 종료를 의미하는 $를 추가하면 된다.
  - pattern = r'\d\d\d-\d\d\d\d-\d\d\d\d$'
  - re.fullmatch 메서드를 사용하는 방법도 있음
- 다양한 옵션을 주고싶다면, 특정 위치에 여러 개의 값을 허용할 수 있다.
  - \[ab] : 해당 위치에 a 또는 b가 올 수 있지만, ab는 안됨
  - pattern = r'\d\d\d\[ -]\d\d\d\d\[ -]\d\d\d\d$' : 전화번호를 쓸때 빈칸과 빼기 기호 둘 다 허용
<br>

## 6.4 정규표현식 동작 방식: 컴파일 vs 실행
- 정규표현식의 처리 절차
  1. 정규표현식 패턴은 일괄적으로 state machine으로 불리는 series로 컴파일
  2. 일치 유무 판단은 compile time이 아닌 run time에 수행 (runtime 중에 프로그램이 state machine을 순회(traverse)하면서 일치를 찾음)
- compile time과 runtime의 차이점을 명확하게 이해하는 것이 중요!
<br>

- state machinedms 컴파일된 후 runtime에 순회 대상이 된다는 간단한 기본 원칙을 따른다.
- 동일한 정규표현식 패턴을 여러번 사용한다면, 해당 패턴을 먼저 컴파일하여 정규표현식 객체로 만들고 그 객체를 반복사용하는 것이 좋다.
  - 미리 컴파일을 해두면 같은 패턴을 여러번 사용할 때의 코드 실행시간이 줄어든다.
  - regex 패키지는 complie 메서드를 제공한다.
    - re.complie()
<br>

## 6.5 대/소문자 무시하기, 그리고 다른 함수 플래그
- regex 플래그를 사용하여 원하는 조건을 만들 수 있다.
- 2개의 플래그를 2항 or 연산자(|)를 사용하여 조합할 수도 있다.
- 검색, 일치, 컴파일 등을 위한 플래그 요약
  - A : ASCII, 아스키 설정으로 가정
  - I : IGNORECASE, 모든 검색과 일치는 대소문자를 구분하지 않음
  - L : LOCALE, 문자숫자식 (단어 경계와 숫자에 로케일 설정을 반영하여 일치를 찾음)
  - M : MULTILINE, 문자열의 시작과 끝처럼 특수문자 ^과 $는 줄의 시작과 끝을 의미함
  - S : DOTALL, 점 기호(.)는 모든 문자와 일치
  - U : UNICODE, 문자숫자식 (단어 경계와 숫자가 유니코드라는 가정 하에 일치를 찾음)
```python
# re.IGNORECASE는 대/소문자를 무시할 때 사용한다
# re.I로 줄여쓸 수 있다

if re.match('m*ack', 'Mack the knife', re.IGNORECASE):
  print('Success')
```
<br>

## 6.6 정규표현식: 기본 문법 요약
- 메타 문자 : 정규표현식 내에서 특수한 의미를 갖는 문자
- 문자 집합 : 메타 문자와 유사하되, 일치 대상의 집합이 주어진다.
- 표현식 수량자(expression quantifier) : 각 문자를 조합한다. (표현식 특정패턴의 반복 등)
- 그룹 : 소괄호 기호를 사용하면 작은 표현식을 큰 표현식과 조합할 수 있다.
<br>

### 6.6.1 메타 문자
- 정규표현식 메타문자
  - . : 점 기호, 개행 문자를 제외한 임의의 문자 하나와 일치 (DOTALL 플래그와 같이쓰면 모든 문자와 일치)
  - ^ : 캐럿 기호, 문자열의 시작을 의미
  - $ : 문자열의 끝을 의미
  - \A : 문자열의 시작
  - \b : 단어의 경계
  - \B : 비단어(nonword)의 경계
  - \d : 모든 숫자
  - \s : 모든 여백 문자 
  - \S : 여백 문자가 아닌 모든 문자
  - \w : 모든 문자숫자식 문자 또는 언더스코어
  - \W : \w에서 정의한 모든 것을 제외한 문자
  - \z : 문자열의 끝
<br>

### 6.6.2 문자 집합
- \[문자_집합] : 집합 안의 하나의 문자와 일치
- \[^문자_집합] : 집합 안에 존재하지 않는 하나의 문자와 일치
- - (빼기 기호) : 2개 문자 사이 범위를 구체적으로 표현 (예 : a-d는 abcd이다)
<br>

- 문자 집합의 규칙
  - 대괄호 기호 안의 문자 대부분은 특별한 경우를 제외하면 리터럴로 인식
  - 오른쪽 대괄호 기호는 문자 집합 종료의 의미를 가지므로, 문자 그대로 인식하려면 역슬래시로 이스케이프 시퀀스를 만들어야 함
  - 빼기 기호와 캐럿 기호는 각각 문자의 시작과 끝에 나타나지 않거나 문자의 시작지점에 나타나면 특별한 의미를 갖지만, 그렇지 않을 경우 리터럴로 인식
  - 역슬래시 기호는 반드시 리터럴 문자가 되지 않음 (역슬래시 리터럴을 표현하려면 \\\ 이렇게)  




