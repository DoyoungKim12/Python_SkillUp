# 5. 정밀하게 텍스트 포매팅하기
<br>

## 5.1 백분율 기호 연산자(%)를 사용한 포매팅
- str 클래스 포매팅 연산자(%)로 출력결과의 서식을 지정할 수 있다.
- 문자열 포매팅 연산자 %는 아래의 두 가지 버전으로 사용할 수 있다.
  - 포맷_문자열 % 값
  - 포맷_문자열 % (값1, 값2, ...) : 한 개 이상의 값 인수가 있다면 튜플로 써야 함
<br>

## 5.2 백분율 기호(%) 포맷 지시자
- 각 지시자와 의미
  - %d : 10진수
  - %i : 정수 (%d와 같음)
  - %s : 입력 값의 표준 문자열 표현 (정수도 쓸 수 있음)
  - %r : 입력 값의 표준 %r 표현 (객체가 파이썬 코드에서 보이는 그대로 출력, 텍스트라면 '이렇게')
  - %x, %X : 16진수
  - %f, %F : 고정소수점 포맷으로 출력하는 부동소수점 숫자
  - %e, %E : 지수 기호로 표현되는 부동소수점 숫자
  - %g, %G : 가장 짧은 기준표현(canonical representation)을 사용한 부동소수점 숫자
<br>

- 글자의 너비와 소수점 숫자도 조정할 수 있다.
  - %\[-]\[너비]\[.정밀도]C
    - 빼기 기호(-)는 왼쪽 자리맞춤을 의미 (기본은 오른쪽 자리맞춤), 자리맞춤이란 정렬과 같은 뜻
    - 너비는 해당 텍스트의 length로, 정한 값보다 문자열의 길이가 짧으면 그만큼 공백을 추가함
    - 정밀도는 자릿수와 같은 개념으로, 정한 값보다 숫자의 자릿수가 낮으면 그만큼 앞에 0을 추가함
  - 예시
    - print('Amount is %10.5d.' % 25)
    - Amount is      00025.
<br>

## 5.3 백분율 기호(%) 변수-너비 출력 필드
- 너비를 변수로 입력하는 방법
  - 원래 너비가 올 자리에 \*를 입력하면 된다. ('%\*d' % (3,6)은 너비 3, 값 6을 의미)
  - 정밀도 또한 변수로 입력할 수 있다. ('%\*.\*d' % (3,3,6)은 너비 3, 정밀도 3, 값 6을 의미)
  - \*든 d든 s든 다 각각 하나의 값을 변수로 표현하는 방식이라고 생각하면, 순서에 따라 여러 너비, 정밀도, 값을 동시에 지정할 수도 있다.
<br>

## 5.4 전역 'format' 함수
- 전역 format 함수는 하나의 출력 필드 포맷을 지정할 수 있다.
- format(데이터, 사양) : 이 함수는 데이터를 확보하여 사양에 맞는 포맷을 적용한 문자열을 반환한다.
  - 사양 문법 : \[너비]\[,]\[.정밀도]\[타입_문자]
  - 너비 : 문자열, 숫자의 최소 길이를 (공백을 더하여)정해진 너비로 맞춤, 최소 길이이므로 문자열을 자르지 않음
  - 쉼표 기호(,) : 천 단위 위치 구분자로 쉼표 기호를 넣음
  - 정밀도 : 출력할 부동소수점 숫자의 자릿수, 문자열 데이터의 최대 길이제한, 최대 길이제한이므로 그 이상의 문자열은 자름
  - 타입문자 : 진법의 기수
<br>

## 5.5 format 메서드 소개
- format 메서드는 format 함수의 모든 기능을 사용하면서도 여러 출력 필드를 다룰 수 있어 훨씬 유연하다.
- 포맷이_지시된_문자열.format(인수들)
- 중괄호({})는 출력필드로, 해당 출력필드의 순서에 맞는 인수가 출력된다.
- 그냥 중괄호를 출력하고 싶으면 두개를 겹쳐쓰면 된다. ({{, }})
<br>

## 5.6 위치로 순서 정하기 (이름 혹은 색인)
- {\[위치] \[!r!s!a] \[:사양]}
  - 위치 지시자 : 숫자(색인 번호) 또는 이름(인수 이름)으로 어느 인수를 출력할지 결정 
  - 인수의 특정 부분을 지정하는 것도 가능
    - {0[0]:} : 첫번재 인수의 첫번째 항목을 선택하라 (인덱싱인데 뒤에 :만 붙은 것)
<br>

## 5.7 'repr' vs 문자열 변환
- 파이썬의 모든 데이터 타입은 두 가지 버전의 문자열 표현이 있다. (파이썬이 번역기 언어라는 것에서 유래)
  - str
  - repr 변환 : 파이썬 객체를 코드에서 표현하는 기준 방식 (canonical representation in source code)
    - 따옴표, 개행문자(\\n) 등이 그대로 보임
    - format 메서드에 !r 제한자를 사용해도 같은 출력결과를 볼 수 있음
<br>

## 5.8 'format'함수와 메서드의 '사양' 필드
- 포맷 지시자 '사양'의 구문은 format 메서드 문법 중 가장 복잡한 부분이다. (각 옵션은 선택사항이나, 입력순서는 반드시 지켜야 함)
- \[\[채우기]자리 맞춤]\[기호]\[#]\[0]\[너비]\[,]\[.정밀도]\[타입]
  - 각 항목은 서로 독립적이다.
<br>

### 5.8.1 출력-필드 너비
- 너비 : 해당 출력의 최소 길이, 콜론(:) 뒤에 씀 ({:5}.format(n))
<br>

### 5.8.2 텍스트 조정: '채우기'와 '자리 맞춤' 문자
- 채우기(padding) : 텍스트의 출력 너비를 지정했을 때, 남는 부분을 무슨 기호로 채울 것인가? (명시하지 않으면 빈칸)
- 자리 맞춤 : 텍스트가 어느 방향으로 쏠려있게 할 것인가? (정렬)
  - < : 왼쪽 자리맞춤
  - \> : 오른쪽 자리맞춤
  - ^ : 가운데 맞춤
  - = : 채우기 문자를 기호와 숫자 사이에 넣음 (숫자 데이터에서만 사용) 
- 예시 : print('{:\*>7}'.format('Tom')) -> '\*\*\*\*Tom' 출력
<br>

### 5.8.3 '기호' 문자
- 숫자 필드를 출력할 때 더하기 또는 빼기 기호의 출력 유무를 결정, 채우기 옵션 바로 다음에 위치한다.
- 기호 문자
  - + : 음수가 아닌 숫자 앞에 더하기 기호를 출력
  - -: 음수에만 빼기 기호를 붙임 (기본 설정)
  - 빈칸 : 음수가 아닌 숫자에 더하기 기호 대신 빈칸 출력, 숫자 출력시 음수 여부와 상관없이 보기좋게 자리맞춤할 때 사용
<br>

### 5.8.4 0으로 시작하는 문자(0)
- 숫자의 채우기 문자를 빈칸 대신 '0' 사용한다.
- 채우기와 자리맞춤을 사용하여 유사한 효과를 얻을 수 있지만, 이 방법이 조금 더 간편하다.
  - 채우기 문자는 숫자 자체의 일부가 될 수 없어 콤마 기호의 영향을 받지 않으며, 더하기와 빼기 기호의 위치에도 차이가 있다.
<br>

### 5.8.5 천 단위 위치 구분자
- 숫자를 출력할 때 천 단위 위치 구분자를 콤마로 표기하는 방법이다.
- 콤마 기호는 너비 지시자 뒤, 정밀도 지시자 앞에 위치한다.
<br>

### 5.8.6 정밀도 제어
- 문자열에도 정밀도를 사용할 수 있지만, 주로 부동소수점 값의 포매팅을 위해 사용된다.
- 정밀도는 소수점의 왼쪽에서 오른쪽까지 출력할 최대 숫자 개수를 의미하고, 소수점 오른쪽에 항상 정확한 개수의 숫자를 출력하려면 f타입 지시자를 써서 고정소수점 포맷을 사용한다.
- 너비와 정밀도를 같이 사용하면 정렬된 숫자 테이블을 만들 때 용이하다.
<br>

### 5.8.7 문자열에서 사용한 '정밀도'(잘라내기)
- 정밀도 지시자를 문자열과 사용하면 문자열의 최대 길이를 제한하여, 그 길이 이상의 값은 잘라낸다.
<br>

### 5.8.8 '타입' 지시자
- 사양 문법의 가장 마지막 항목은 데이터의 출력을 결정하는 '타입' 지시자이다. 
- 5.2에서 포맷 지시자와 겹치는 부분이 있다. (k진수 등)
  - b : 이진수
  - c : 아스키코드(유니코드)
  - d : 10진수
  - e : 부동소수점 값을 지수포맷으로 표현
  - f : 고정소수점
  - g : e와 f중 짧은 것
  - n : 지역 포맷 (나라마다 다른 관습적 표현을 적용)
  - o : 8진법
  - x : 16진법
  - % : 백분율로 표기
<br>

## 5.9 변수-길이 필드
- format 메서드에서 각 사양을 가변 값으로 넣으려면?
- 출력 필드 안에 고정 값 대신 중괄호({})를 넣으면 된다.
- 예시
  - '{:{}.{}}'.format(1.2345, 10, 4)는 '{0:{1}.{2}}'.format(1.2345, 10, 4)와 같고, 출력은 '     1.234'가 된다.
  - '{:{}.{}}'.format(1.2345, a, b)로 하면 해당 변수를 참조하는 식으로 쉽게 바꿀 수 있다.
  - 다중 출력필드에서는 아래와 같다.
    - '{0:{1}} {2:{3}}'.format(a,b,c,d)로, 앞의 출력필드에서 앞의 2개를 쓰고 뒤의 출력필드에서 2개를 쓰되 그 안의 순서로 데이터 객체와 표현식이 정해진다.
<br>

## 5.10 정리해보자
- 파이썬 코어 언어는 출력 문자열을 포매팅하는 세가지 방법을 제공한다.
   1. 문자열 클래스 포매팅 연산자(%)를 사용하여 출력
   2. format 함수를 사용하는 것
   3. 문자열 클래스의 format 메서드를 사용하는 것 (전역 format 함수 기반이지만, 모든 다중 출력 필드를 사용할 수 있는 가장 유연한 방법)
<br>






