# 10. Decimal, Money, 그리고 기타 클래스
- 어떤 통화라도 오류없이 정확하게 기입할 수 있는, 금융분야에 특화된 데이터 활용방법을 알아보자.
- 이 장에서는 Decimal 클래스와 우리가 직접 구축할 Money 클래스를 소개할 것이다. 
<br><br>


## 10.1 숫자 클래스의 개요
- 이 책에서는 대부분 두가지의 숫자데이터를 다룸 (정수, 부동소수점)
  - 이 두가지 데이터타입만으로 대부분의 기능을 구현할 수 있긴 하지만, 모든 기능을 완벽히 구현할 수 있는 것은 아님
  - 정수는 소수점이 없어서 갖는 제약이 있고, 부동소수점은 반올림 오차로 인한 문제가 있음
<br>

- 이 장에서는 아래의 클래스를 소개한다.
  - Decimal 클래스 : 정확하고 오차없이 10진수 소수점을 가질 수 있는 '고정-포인트' 데이터 타입
  - Money 클래스 : 직접 개발해볼 것
  - Fraction 클래스 : 1/3과 같은 분수를 반올림 오차 없이 저장할 수 있음
  - complex 클래스 : 고등수학의 복소수 숫자를 나타냄. 실수와 허수로 나뉨. int, float과 같이 내장된 클래스
<br> <br>

## 10.2 부동소수점 포맷의 제약 사항
- float 값의 문제점 : 10진수 포맷으로 출력되지만 내부적으로는 이진수로 저장됨
  - 예를 들어, 1/10(0.1)은 1/2, 1/4처럼 2의 제곱이 아니라서 정확한 이진수 포맷으로 저장할 수 없음 -> 반올림한 값은 정확한 값과의 괴리가 발생
  - 일반적인 프로그래밍에서는 이러한 부동소수점 오차를 허용하지만, 금융 애플리케이션에서는 상황이 다름
    - 작은 오류도 시간이 지남에 따라 누적된다면 큰 오류가 될 수 있는 것
    - 이러한 문제를 파이썬에서는 Decimal 클래스를 사용하여 해결할 수 있음
<br> <br>

## 10.3 Decimal 클래스 소개
- 아래와 같이 Decimal 클래스를 import하고 인스턴스를 정의할 수 있음
  - 반올림 에러가 없는 값을 저장하기 위해서는 텍스트 문자열 값을 사용하여 초기화해야 함

```python
from decimal import Decimal

my_dec = Decimal()
print(my_dec)
# 0을 반환

d = Decimal('0.1')
print(d+d+d)
# 0.3을 정확히 반환 (부동소수점 오차 없음!)

d = Decimal(0.1)
print(d)
# 0.100000000000005511151
# 부동소수점 오차가 해결되지 않음 -> 이미 반올림 에러를 포함한 값을 넘겼기 때문!
# 이래서 문자열 값을 넘기는 것임
```

- Decimal 클래스의 특성
  - 연산결과 자리수를 보존함 (소수점 이하 자리수)
  - 두 객체를 곱할 경우, 소수점 이하 자리수는 증가함 -> round 함수를 사용하여 조정
  - 정수는 Decimal 객체와 자유롭게 더하거나 곱할 수 있고, 정수로 Decimal 객체를 정확히 초기화할 수 있음(텍스트 문자열처럼)
  - 부동소수점 값을 Decimal 객체와 연산하려고 하면 에러 발생
  - Decimal 객체를 생성하는 것은 부동소수점 객체를 생성하는 것보다 30배 더 많은 시간이 걸리며, 연산처리 속도는 60배 더 걸림
    - 정확성과 속도의 트레이드오프로, 정확성이 중요한 상황이 아니라면 부동소수점을 사용하는 것이 이득이다. 









