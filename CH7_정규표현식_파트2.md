# 7. 정규표현식 파트2
<br>

## 7.1 고급 정규표현식 문법의 요약
- 정규표현식 고급 문법 요약 (추후 이어지는 절에서 각 기능에 대해 자세히 설명할 것)
  - (?:expr) : 태그가 없는 그룹 (일치조건에 만족하더라도 그룹으로 기록되지 않는 패턴)
  - expr?? : ? 연산자의 게으른(non-greedy) 버전
  - expr*? : 게으른 일치를 사용, expr이 0회 이상 나타나는지 확인
  - expr+? : 게으른 일치를 사용, expr이 1회 이상 나타나는지 확인
  - expr{m}? : {m} 연산자의 게으른 버전, 탐욕적 버전과 똑같이 동작
  - expr{m,n}? : {m,n} 연산자의 게으른 버전
  - (?=expr) : 긍정적 전방탐색
  - (?!expr) : 부정적 전방탐색
  - (?<=expr) : 긍정적 후방탐색
  - (?<!expr) : 부정적 후방탐색
  - (?P<name\>expr) : 명명그룹 (expr이 일치하면 전체 표현식이 일치)
  - (?P=name) : 명명그룹 테스트
  - (#text) : 주석 (정규표현식 안에 나타날 수 있지만 검사기가 내용을 무시함)
  - (?(name)yes_pat|no_pat) : 조건적 일치
  
<br>

## 7.2 태그를 남기지 않는 그룹
### 7.2.1 표준 숫자 예시
- 천 단위 그룹 구분자(,)를 포함한 미국식 포맷으로 작성된 숫자만 허용하는 패턴이 있다고 하자.
  - r'\d{1,3}(,\d{3})\*(\.\d\*)?'
  - \b(단어 경계)를 패턴 맨 뒤에 추가해서 아래와 같은 경우와 일치하지 않도록 한다.
    - 1,20123
    - 근데 이렇게 해도 1,20.00 의 경우에서 20.00을 패턴과 일치하는 경우로 검출하는 오류가 있긴 함
<br>

### 7.2.2 태깅 문제 고치기
- 태그가 붙은 그룹은 re.findall의 동작을 변경하므로 문제가 된다.
  - 위 숫자패턴 예시에서의 첫번째 해결방법은 전체 패턴을 그룹화(태깅)하는 것이다.
  - 그리고 여기서 제시하는 두번째 방법은 태깅을 아예 하지 않는 것이다.
    - (?:expr) : expr를 하나의 단위로 인식하지만, 패턴이 일치하더라도 일치한 문자를 태그로 남기지 않음
<br>

## 7.3 탐욕적 일치 vs 게으른 일치
- 탐욕적(greedy) 일치와 게으른(lazy) 일치의 차이를 보여주는 예시
  - HTML 헤더에서 특정 텍스트를 찾는 문제가 있고, 아래와 같은 문자열에서 선형괄호(<\>)안의 텍스트를 찾고 싶다고 하자.
    - the_line = '<h1\>Heading</h1\>'
  - 이 경우의 정규표현식 검색 패턴은 아래와 같을 것이다.
    - pat = r'<.*\>'
  - 우리가 원하는 결과는 '<h1\>'이지만, 결과는 '<h1\>Heading</h1\>'이다.
    - 이유는 탐욕적 일치를 택했기 때문이다.
    - 탐욕적 일치는 패턴과 일치하는 텍스트가 여러개라면 가능한 한 많은 텍스트와 일치하는 것을 선택한다.
    - 게으른 일치는 이와 다르게, 처음 만나는 선형괄호에서 멈출 것이다.
      - 이런 게으른 일치를 명시하기 위해서는 더하기 기호나 별표 기호 뒤에 물음표 기호를 붙이면 된다. (lazy_pat = r'<.\*?\>'
      - 문장의 수를 셀 때는 아래의 예시를 활용하자.

```python
s = '''Here is a single sentence. Here is
another sentence, ending in a period. And 
here is yet another.'''

# 문장이 끝나는 기호가 오기 전에 0개 이상의 단어가 등장하는 패턴 = 문장 찾기
# 여러 개의 문장이 연결되어 있으면 lazy하게 찾아야 모든 문장을 다 찾으므로, \* 뒤에 ?를 붙여준다 
pat = r'.*?[.?!]'

# re.DOTALL 플래그는 점 기호 메타문자가 문자열의 끝이 아닌 개행문자로 인식되게 한다 (더 짧게 쓰려면 re.S로 쓸 수 있음)
lst = re.findall(pat, s, flags=re.DOTALL)
print(list)
```

test



  


